{% extends 'base.html' %}

{% block title %}Homepage{% endblock %}

{% block content %}

 <p>House name: {{ user.calendar.house_name }}</p>
 <p>Your housemates: </p>
 <div>
     <ul> 
        {% for housemate in user.get_housemates() %}
         <li>
            <a href="/">
              {{ housemate.name }}
            </a>
        </li>  
        {% endfor %}
     </ul>

     <script src="static/calendar.js"></script>
     <div id='#notifications'>

         <p>Notifications: </p>
          <ul id='#notifications'>
            <li id='#notifications'></li>
             
          </ul>

     </div>

     <div id="calendar"></div>

    <p>Search for and add housemates: </p>

    <form action="/add_housemates" method="POST">
        Search name:<input type="text" name="housemate_name">
        <input type="submit">
    </form>   
</div>

     <script>
        alert("hi");
       
         $.get('/get_notifications.json',(response) => {
            // get length of json object so we can loop through it

            console.log('1')
            jsonSize = Object.keys(response).length;
            console.log(jsonSize)
             for (let i = 0; i < jsonSize;i++){
               console.log('3')
                let id = response[i].id;
                console.log(id);
                $('#notifications').append(`<li>$${id}</li>`);
                console.log('4')
            };
               
         });
     </script>

{% endblock %}